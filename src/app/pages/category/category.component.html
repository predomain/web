<div
  class="co-header-container cos-pos-fixed cos-fluid-width cos-padding-2 cos-no-padding-left cos-no-padding-right"
>
  <app-main-header
    #mainHeader
    [show]="{
      showBasket: true,
      showBookmark: true,
      showCanvas: true,
      showSearch: true,
      showTranslation: true,
      showManagement: true
    }"
  ></app-main-header>
</div>
<div
  #fadeTop
  class="co-top-fade cos-pos-fixed cos-pos-top-reset cos-fluid-width"
  fxLayout="row"
  fxLayoutAlign="center end"
></div>
<div
  #backToTop
  class="co-back-to-top cos-pos-fixed cos-pos-bottom-reset cos-pos-right-reset cos-padding-3 cos-soft-visibility-hidden"
>
  <div
    (click)="backScrollContentToTop()"
    class="cos-bg-main cos-padding-0 cos-no-padding-bottom cos-border-radius-1 cos-box-shadow cos-pointer"
  >
    <mat-icon> arrow_upward</mat-icon>
  </div>
</div>
<div
  #scrollableContentContainer
  appGetScrollableXy
  (scrollPosition)="
    !($event[1] > 300)
      ? (backToTop.style.visibility = 'hidden')
      : (backToTop.style.visibility = 'visible');
    $event[1] > 50
      ? (fadeTop.style.display = 'flex')
      : (fadeTop.style.display = 'none');
    $event[1] > 150
      ? (filters.style.position = 'sticky')
      : (filters.style.position = 'static');
    $event[1] > 150
      ? (filters.style.top = '90px')
      : (filters.style.top = 'none');
    containTextFilterIsOn === false && hasViewBottomed($event[1]) === true
      ? lazyLoad()
      : null
  "
  fxLayout="column"
  fxLayoutAlign="start start"
  class="co-content-container cos-fluid-width cos-fluid-height cos-overflow-y cos-pos-fixed"
>
  <div
    #profileContentContainer
    fxLayout="row"
    fxLayoutAlign="center start"
    class="co-profile-content-container cos-fluid-width"
  >
    <div
      fxFlex="100"
      fxLayout="column"
      class="co-profile-content"
      [ngClass]="
        isDeviceMobile === true
          ? { 'cos-padding-2': true, 'cos-no-padding-top': true }
          : ''
      "
    >
      <div
        fxFlex="50px"
        fxLayout="row"
        fxFlexAlign="top"
        fxLayoutAlign="start center"
        class="cos-fluid-width cos-body-3 cos-padding-1 cos-no-padding-left cos-border cos-no-border-left cos-no-border-top cos-no-border-right"
        [ngClass]="isDeviceMobile === true ? 'cos-no-padding-top' : ''"
      >
        <a href="/#/home">{{ "HEADER.HOME" | translate }}</a>
        <span
          fxFlex="0 0 auto"
          fxLayoutAlign="center center"
          class="cos-padding-0 cos-no-padding-top cos-no-padding-bottom"
        >
          <mat-icon class="cos-small-icon" color="primary"
            >arrow_forward</mat-icon
          >
        </span>
        <span class="cos-gray-text">
          {{ "HEADER.CATEGORIES" | translate }}
        </span>
        <span
          fxFlex="0 0 auto"
          fxLayoutAlign="center center"
          class="cos-padding-0 cos-no-padding-top cos-no-padding-bottom"
        >
          <mat-icon class="cos-small-icon" color="primary"
            >arrow_forward</mat-icon
          >
        </span>
        <span class="cos-gray-text">
          {{
            categoryApiData === undefined
              ? "..."
              : rootCategoryData?.categoriesDescription[
                  categoryApiData?.category
                ]
          }}
        </span>
      </div>
      <div fxFlex fxLayout="row" fxLayoutGap="30px" class="cos-fluid-width">
        <div class="co-filters">
          <div
            #filters
            fxLayout="column"
            class="co-filters-content"
            [ngClass]="
              tabDisplay !== tabDisplayModes.DOMAINS ||
              hasDomainsListLoaded === false
                ? 'cos-disabled'
                : ''
            "
          >
            <div
              fxLayout="row"
              fxLayoutAlign="start center"
              fxLayoutGap="10px"
              class="cos-padding-2 cos-no-padding-left cos-no-padding-bottom cos-no-padding-right"
            >
              <span class="cos-body-0">
                <b> {{ "LABELS.FILTERS" | translate }} </b>
              </span>
            </div>
            <div
              fxLayoutGap="10px"
              class="cos-padding-1 cos-no-padding-left cos-no-padding-right cos-border-radius-2 cos-no-border-radius-top-left cos-no-border-radius-top-right"
            >
              <form
                fxFlex
                fxLayout="column"
                fxLayoutAlign="start stretch"
                [formGroup]="filterForm"
                class="cos-fluid-width cos-body-4 cos-gray-text"
              >
                <ng-container
                  *ngIf="
                    categoryApiData !== undefined &&
                    categoryApiData.emojis === true
                  "
                >
                  <div class="co-form-label">Sub-categories</div>
                  <mat-form-field class="co-main-search cos-body-0">
                    <mat-select
                      formControlName="subcategory"
                      fxFlex
                      class="cos-border-radius-2"
                      (selectionChange)="resetLastDomainSearchResult()"
                    >
                      <mat-option [value]="''">
                        {{ "BUTTON.NONE" | translate }}
                      </mat-option>
                      <mat-option
                        *ngFor="let s of subCategoryKeys"
                        [value]="s"
                        class="cos-capitalized-text"
                      >
                        <span class="cos-capitalized-text">
                          {{ s }}
                        </span>
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </ng-container>
                <div class="co-form-label">
                  {{ "LABELS.CONTAINING_KEYWORDS" | translate }}
                </div>
                <mat-form-field class="co-main-search cos-body-0">
                  <input
                    class="cos-fluid-width cos-bg-darker-gray"
                    matInput
                    type="text"
                    autocomplete="off"
                    maxlength="50"
                    formControlName="contains"
                    (input)="doUpdateInterface(); resetLastDomainSearchResult()"
                  />
                  <mat-icon
                    *ngIf="
                      categoryApiData !== undefined &&
                      categoryApiData.emojis === true
                    "
                    class="cos-small-icon cos-icon-can-activate"
                    (click)="toggleEmojiPicker(); $event.stopPropagation()"
                    matSuffix
                  >
                    sentiment_satisfied
                  </mat-icon>
                  <emoji-mart
                    id="emoji-mart"
                    *ngIf="showEmojiPicker"
                    (emojiSelect)="addEmojiToFilter($event)"
                    (click)="$event.stopPropagation()"
                    title="Select emoji..."
                    class="emoji-mart"
                  ></emoji-mart>
                </mat-form-field>
                <div class="co-form-label">
                  {{ "LABELS.REGISTRATION_DATE" | translate }}
                </div>
                <mat-form-field class="co-main-search cos-body-0">
                  <input
                    class="cos-fluid-width cos-bg-darker-gray"
                    matInput
                    type="text"
                    autocomplete="off"
                    maxlength="15"
                    formControlName="registration"
                    [matDatepicker]="registrationPicker"
                    (change)="resetLastDomainSearchResult()"
                  />
                  <mat-icon
                    matSuffix
                    class="cos-small-icon cos-icon-can-activate"
                    (click)="openRegistrationPicker()"
                    >calendar_month</mat-icon
                  >
                  <mat-datepicker #registrationPicker></mat-datepicker>
                </mat-form-field>
                <div class="co-form-label">
                  {{ "LABELS.EXPIRATION_DATE" | translate }}
                </div>
                <mat-form-field class="co-main-search cos-body-0">
                  <input
                    class="cos-fluid-width cos-bg-darker-gray"
                    matInput
                    type="text"
                    autocomplete="off"
                    maxlength="15"
                    formControlName="expiration"
                    [matDatepicker]="expiredPicker"
                    (change)="resetLastDomainSearchResult()"
                  />
                  <mat-icon
                    matSuffix
                    class="cos-small-icon cos-icon-can-activate"
                    (click)="openExpiredPicker()"
                    >calendar_month</mat-icon
                  >
                  <mat-datepicker #expiredPicker></mat-datepicker>
                </mat-form-field>

                <div class="co-form-label">
                  {{ "LABELS.MIN_LENGTH" | translate }}
                </div>
                <mat-slider
                  thumbLabel
                  [displayWith]="formatLabel"
                  tickInterval="1"
                  step="1"
                  min="3"
                  max="20"
                  aria-label="units"
                  [value]="filterForm.controls.minLength.value"
                  (change)="
                    filterForm.controls.minLength.setValue($event.value);
                    resetLastDomainSearchResult()
                  "
                ></mat-slider>

                <div class="co-form-label">
                  {{ "LABELS.MAX_LENGTH" | translate }}
                </div>
                <mat-slider
                  thumbLabel
                  [displayWith]="formatLabel"
                  tickInterval="1"
                  step="1"
                  min="3"
                  [max]="
                    categoryApiData === undefined
                      ? 100
                      : categoryApiData.max_length
                  "
                  aria-label="units"
                  [value]="filterForm.controls.maxLength.value"
                  (change)="
                    filterForm.controls.maxLength.setValue($event.value);
                    resetLastDomainSearchResult()
                  "
                ></mat-slider>

                <div fxLayout="column" fxLayoutGap="10px">
                  <div
                    fxFlex
                    *ngIf="
                      categoryApiData !== undefined &&
                      categoryApiData.alphabetical === true
                    "
                  >
                    <mat-slide-toggle
                      [checked]="typesFilter.alphabet"
                      (change)="
                        typesFilter.alphabet = $event.checked;
                        typesFilter.emoji = false;
                        resetLastDomainSearchResult()
                      "
                    >
                      {{ "LABELS.CONTAIN_ALPHABET" | translate }}
                    </mat-slide-toggle>
                  </div>
                  <div
                    fxFlex
                    *ngIf="
                      categoryApiData !== undefined &&
                      categoryApiData.numeric === true
                    "
                  >
                    <mat-slide-toggle
                      [checked]="typesFilter.numbers"
                      (change)="
                        typesFilter.numbers = $event.checked;
                        typesFilter.emoji = false;
                        resetLastDomainSearchResult()
                      "
                    >
                      {{ "LABELS.CONTAIN_NUMBERS" | translate }}
                    </mat-slide-toggle>
                  </div>
                  <div
                    fxFlex
                    *ngIf="
                      categoryApiData !== undefined &&
                      categoryApiData.emojis === true
                    "
                  >
                    <mat-slide-toggle
                      [checked]="typesFilter.emoji"
                      (change)="
                        typesFilter.emoji = $event.checked;
                        typesFilter.numbers = false;
                        typesFilter.alphabet = false;
                        resetLastDomainSearchResult()
                      "
                    >
                      {{ "LABELS.CONTAIN_EMOJI" | translate }}
                    </mat-slide-toggle>
                  </div>
                  <div fxFlex>
                    <mat-slide-toggle
                      [checked]="typesFilter.palindrome"
                      (change)="
                        typesFilter.palindrome = $event.checked;
                        resetLastDomainSearchResult()
                      "
                    >
                      Palindromes
                    </mat-slide-toggle>
                  </div>
                  <div fxFlex>
                    <mat-slide-toggle
                      [checked]="typesFilter.prepunk"
                      (change)="
                        typesFilter.prepunk = $event.checked;
                        resetLastDomainSearchResult()
                      "
                    >
                      Pre-punk
                    </mat-slide-toggle>
                  </div>
                  <div fxFlex>
                    <mat-slide-toggle
                      [checked]="typesFilter.repeating"
                      (change)="
                        typesFilter.repeating = $event.checked;
                        resetLastDomainSearchResult()
                      "
                    >
                      Repeating
                    </mat-slide-toggle>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
        <div
          fxFlex
          fxLayout="column"
          fxLayoutAlign="stretch stretch"
          fxLayoutGap="10px"
          [ngClass]="
            isDeviceMobile === true
              ? { 'cos-overflow-y': true, 'cos-fluid-width': true }
              : ''
          "
        >
          <div
            class="cos-fluid-width cos-show-on-mobile cos-no-margin-bottom"
            [style.height]="'0px'"
          >
            <div
              id="co-avatar-item-size-guide-mobile"
              [style.width]="guideAvatarSize + 'px'"
            ></div>
          </div>
          <div
            fxFlex="0 0 auto"
            [ngClass]="hasDomainsListLoaded === false ? 'cos-disabled' : ''"
            class="cos-border cos-no-border-left cos-no-border-right cos-no-border-top cos-margin-2 cos-no-margin-top cos-no-margin-left cos-no-margin-right"
          >
            <div
              fxFlex
              fxLayout="row"
              fxLayoutGap="10px"
              class="cos-body-0"
              [ngClass]="
                isDeviceMobile === true
                  ? {
                      'co-content-header-tabs-mobile': true,
                      'cos-overflow-y': true,
                      'cos-overflow-no-bars': true,
                      'cos-fluid-width': true
                    }
                  : ''
              "
            >
              <div
                class="co-list-picker cos-button-tab cos-pointer cos-center-text"
                [ngClass]="
                  tabDisplay !== tabDisplayModes.DOMAINS ||
                  hasDomainsListLoaded === false
                    ? {
                        'cos-gray-text': true,
                        'cos-button-tab-disabled': true
                      }
                    : ''
                "
                (click)="tabDisplay = tabDisplayModes.DOMAINS"
              >
                <b> {{ "LABELS.DOMAINS" | translate }} </b>
              </div>
              <div
                class="co-list-picker cos-button-tab cos-pointer cos-center-text"
                [ngClass]="
                  tabDisplay !== tabDisplayModes.ACTIVITY ||
                  hasDomainsListLoaded === false
                    ? {
                        'cos-gray-text': true,
                        'cos-button-tab-disabled': true
                      }
                    : ''
                "
                (click)="tabDisplay = tabDisplayModes.ACTIVITY"
              >
                {{ "LABELS.ACTIVITY" | translate }}
              </div>
              <div
                class="co-list-picker cos-button-tab cos-pointer cos-center-text"
                [ngClass]="
                  tabDisplay !== tabDisplayModes.ANALYTICS ||
                  hasDomainsListLoaded === false
                    ? {
                        'cos-gray-text': true,
                        'cos-button-tab-disabled': true
                      }
                    : ''
                "
                (click)="
                  tabDisplay = tabDisplayModes.ANALYTICS; showAnalyticsChart()
                "
              >
                {{ "LABELS.ANALYTICS" | translate }}
              </div>
            </div>
            <div
              id="co-avatar-item-size-guide"
              class="cos-disappear-on-mobile"
              [style.width]="guideAvatarSize + 'px'"
            ></div>
            <div
              fxFlex
              fxLayoutGap="10px"
              fxLayoutAlign="end center"
              [ngClass]="
                tabDisplay === tabDisplayModes.ACTIVITY ||
                hasDomainsListLoaded === false
                  ? 'cos-disabled'
                  : ''
              "
              class="cos-disappear-on-mobile cos-padding-2 cos-no-padding-left cos-no-padding-right"
            >
              <mat-icon
                class="cos-icon-can-activate"
                (click)="downloadDomainList()"
              >
                download
              </mat-icon>
              <span class="cos-gray-text"> | </span>
              <mat-icon
                class="cos-icon-can-activate"
                [color]="displayMode === displayModes.AVATAR ? 'primary' : ''"
                (click)="setDisplayMode(displayModes.AVATAR)"
              >
                grid_view
              </mat-icon>
              <mat-icon
                class="cos-icon-can-activate"
                [color]="displayMode === displayModes.LINEAR ? 'primary' : ''"
                (click)="setDisplayMode(displayModes.LINEAR)"
              >
                sort
              </mat-icon>
            </div>
          </div>
          <div
            *ngIf="tabDisplay === tabDisplayModes.ACTIVITY"
            fxFlex
            fxLayout="column"
            fxLayoutAlign="start start"
          >
            <ng-container *ngTemplateOutlet="linearSalesTemplateHeader">
            </ng-container>
            <div
              *ngIf="
                salesListResolving === false &&
                (salesList === null || salesList === undefined)
              "
              fxFlex
              fxLayout="column"
              fxLayoutAlign="center center"
              class="cos-fluid-width cos-fluid-height"
            >
              <div fxFlex="0 0 auto">
                <app-custom-spinner
                  [spinnerText]="'SPINNER.NO_DATA_TO_DISPLAY'"
                  [spinnerSize]="150"
                  [mode]="spinnerModes.LOADING"
                  [customIcon]="'llayers'"
                >
                </app-custom-spinner>
              </div>
            </div>
            <ng-container *ngTemplateOutlet="linearSalesTemplate">
            </ng-container>
            <ng-container *ngIf="salesListResolving === true">
              <ng-container *ngTemplateOutlet="placeHolderFullTemplate">
              </ng-container>
            </ng-container>
            <ng-container *ngTemplateOutlet="linearDomainTemplateFooter">
            </ng-container>
          </div>

          <div
            *ngIf="tabDisplay === tabDisplayModes.ANALYTICS"
            fxFlex
            fxLayout="column"
            fxLayoutGap="30px"
          >
            <div
              fxFlex
              fxLayout="column"
              class="co-chart-container cos-fluid-width"
            >
              <div
                fxFlex="0 0 auto"
                id="co-chart-control"
                fxLayoutGap="10px"
                fxLayout="column"
                class="cos-bg-faded-darker-gray cos-padding-1 cos-border-radius-2 cos-margin-2 cos-no-margin-left cos-no-margin-right cos-no-margin-top"
              >
                <div fxFlex class="cos-body-4">
                  {{ "LABELS.SALES_ACTIVITY" | translate }}
                </div>
              </div>
              <div fxFlex class="cos-fluid-height">
                <app-dot
                  #chart
                  *ngIf="chartData !== undefined"
                  fxFlex
                  [data]="chartData"
                  [chartMetadata]="{
                    width: chartWidth,
                    height: 400,
                    maxTicks: isDeviceMobile === true ? 5 : 15
                  }"
                  class="cos-margin-0 cos-no-margin-right"
                >
                </app-dot>
                <div
                  *ngIf="chartData === undefined"
                  fxFlex
                  fxLayout="column"
                  fxLayoutAlign="center center"
                  class="cos-fluid-width cos-fluid-height"
                >
                  <div fxFlex="0 0 auto">
                    <app-custom-spinner
                      [spinnerText]="'SPINNER.LOADING_DATA'"
                      [spinnerSize]="150"
                      [mode]="spinnerModes.LOADING"
                      [customIcon]="'spin'"
                    >
                    </app-custom-spinner>
                  </div>
                </div>
              </div>
            </div>

            <div
              id="co-stats-container"
              fxLayout="column"
              fxLayoutGap="20px"
              fxLayoutAlign="start start"
              class="co-meta-stats-container"
            >
              <div fxLayout="column" fxLayoutGap="10px" class="cos-fluid-width">
                <div
                  fxFlex
                  fxLayout="row wrap"
                  fxLayoutAlign="start start"
                  class="co-info-container cos-body-2 cos-fluid-width"
                >
                  <div
                    class="co-statistics-box cos-box-shadow cos-bg-faded-darker-gray cos-padding-0 cos-border-radius-2"
                  >
                    <div
                      fxLayout="column"
                      fxLayoutGap="10px"
                      *ngIf="categoryNormalisedMetadata === undefined"
                      class="cos-body-2"
                    >
                      <div
                        style="height: 28px"
                        class="cos-fluid-width cos-placeholder cos-border-radius-1"
                      ></div>
                      <div
                        style="height: 28px"
                        class="cos-fluid-width cos-placeholder cos-border-radius-1"
                      ></div>
                    </div>
                    <div
                      *ngIf="categoryNormalisedMetadata !== undefined"
                      fxLayout="column"
                      fxLayoutAlign="center center"
                      fxLayoutGap="10px"
                      class="cos-body-0 cos-fluid-width"
                    >
                      <div fxFlex="0 0 auto">
                        <b>
                          {{ categoryNormalisedMetadata?.domainsCount }}
                        </b>
                      </div>
                      <div fxFlex="0 0 auto" class="cos-body-4">-</div>
                    </div>
                    <div
                      class="cos-gray-text cos-margin-0 cos-no-margin-bottom cos-center-text cos-body-4"
                    >
                      {{ "LABELS.TOTAL_ASSETS" | translate }}
                    </div>
                  </div>

                  <div
                    class="co-statistics-box cos-box-shadow cos-bg-faded-darker-gray cos-padding-0 cos-border-radius-2"
                  >
                    <div
                      fxLayout="column"
                      fxLayoutGap="10px"
                      *ngIf="categoryNormalisedMetadata === undefined"
                      class="cos-body-2"
                    >
                      <div
                        style="height: 28px"
                        class="cos-fluid-width cos-placeholder cos-border-radius-1"
                      ></div>
                      <div
                        style="height: 28px"
                        class="cos-fluid-width cos-placeholder cos-border-radius-1"
                      ></div>
                    </div>
                    <div
                      *ngIf="categoryNormalisedMetadata !== undefined"
                      fxLayout="column"
                      fxLayoutAlign="center center"
                      fxLayoutGap="10px"
                      class="cos-body-0 cos-fluid-width"
                    >
                      <div fxFlex="0 0 auto">
                        <b>
                          {{ priceToFixed(dailySalesVolume, 2) }}
                          ETH
                        </b>
                      </div>
                      <div
                        *ngIf="dailyVolumeTrend > 0"
                        fxFlex="0 0 auto"
                        class="cos-uptrend-text cos-body-4"
                      >
                        +{{ dailyVolumeTrend }}%
                      </div>
                      <div
                        *ngIf="
                          !(dailyVolumeTrend > 0) && dailyVolumeTrend !== 0
                        "
                        fxFlex="0 0 auto"
                        class="cos-downtrend-text cos-body-4"
                      >
                        {{ dailyVolumeTrend }}%
                      </div>
                      <div
                        *ngIf="dailyVolumeTrend === 0"
                        fxFlex="0 0 auto"
                        class="cos-body-4"
                      >
                        -
                      </div>
                    </div>
                    <div
                      class="cos-gray-text cos-margin-0 cos-no-margin-bottom cos-center-text cos-body-4"
                    >
                      {{ "LABELS.DAILY_VOLUME" | translate }}
                    </div>
                  </div>

                  <div
                    class="co-statistics-box cos-box-shadow cos-bg-faded-darker-gray cos-padding-0 cos-border-radius-2"
                  >
                    <div
                      *ngIf="categoryNormalisedMetadata === undefined"
                      class="cos-body-2"
                    >
                      <div
                        style="height: 28px"
                        class="cos-fluid-width cos-placeholder cos-border-radius-1"
                      ></div>
                    </div>
                    <div
                      *ngIf="categoryNormalisedMetadata !== undefined"
                      fxLayout="row"
                      fxLayoutAlign="center center"
                      fxLayoutGap="10px"
                      class="cos-body-0 cos-fluid-width"
                    >
                      <div fxFlex="0 0 auto">
                        <b>
                          {{ salesCountThisMonth }}
                        </b>
                      </div>
                    </div>
                    <div
                      class="cos-gray-text cos-margin-0 cos-no-margin-bottom cos-center-text cos-body-4"
                    >
                      {{ "LABELS.MONTHLY_SALES" | translate }}
                    </div>
                  </div>

                  <div
                    class="co-statistics-box cos-box-shadow cos-bg-faded-darker-gray cos-padding-0 cos-border-radius-2"
                  >
                    <div
                      *ngIf="categoryNormalisedMetadata === undefined"
                      class="cos-body-2"
                    >
                      <div
                        style="height: 28px"
                        class="cos-fluid-width cos-placeholder cos-border-radius-1"
                      ></div>
                    </div>
                    <div
                      *ngIf="categoryNormalisedMetadata !== undefined"
                      fxLayout="row"
                      fxLayoutAlign="center center"
                      fxLayoutGap="10px"
                      class="cos-body-0 cos-fluid-width"
                    >
                      <div fxFlex="0 0 auto">
                        <b>
                          {{ salesCountToday }}
                        </b>
                      </div>
                    </div>
                    <div
                      class="cos-gray-text cos-margin-0 cos-no-margin-bottom cos-center-text cos-body-4"
                    >
                      {{ "LABELS.DAILY_SALES" | translate }}
                    </div>
                  </div>

                  <div
                    class="co-statistics-box cos-box-shadow cos-bg-faded-darker-gray cos-padding-0 cos-border-radius-2"
                  >
                    <div
                      *ngIf="categoryNormalisedMetadata === undefined"
                      class="cos-body-2"
                    >
                      <div
                        style="height: 28px"
                        class="cos-fluid-width cos-placeholder cos-border-radius-1"
                      ></div>
                    </div>
                    <div
                      *ngIf="categoryNormalisedMetadata !== undefined"
                      fxLayout="row"
                      fxLayoutAlign="center center"
                      fxLayoutGap="10px"
                      class="cos-body-0 cos-fluid-width"
                    >
                      <div fxFlex="0 0 auto">
                        <b>
                          {{
                            priceToFixed(categoryNormalisedMetadata?.topSale, 2)
                          }}
                          ETH
                        </b>
                      </div>
                    </div>
                    <div
                      class="cos-gray-text cos-margin-0 cos-no-margin-bottom cos-center-text cos-body-4"
                    >
                      {{ "LABELS.TOP_SALE" | translate }}
                    </div>
                  </div>
                  <div
                    class="co-statistics-box cos-box-shadow cos-bg-faded-darker-gray cos-padding-0 cos-border-radius-2"
                  >
                    <div
                      *ngIf="categoryNormalisedMetadata === undefined"
                      class="cos-body-2"
                    >
                      <div
                        style="height: 28px"
                        class="cos-fluid-width cos-placeholder cos-border-radius-1"
                      ></div>
                    </div>
                    <div
                      *ngIf="categoryNormalisedMetadata !== undefined"
                      fxLayout="row"
                      fxLayoutAlign="center center"
                      fxLayoutGap="10px"
                      class="cos-body-0 cos-fluid-width"
                    >
                      <div
                        fxFlex="0 0 auto"
                        class="cos-wallet-address-text-cut cos-center-text cos-fluid-width"
                      >
                        <a
                          (click)="
                            goToEtherscanAddress(
                              categoryNormalisedMetadata?.topBuyer
                            )
                          "
                          class="cos-center-text cos-body-3"
                        >
                          <b>
                            {{
                              this.categoryNormalisedMetadata
                                .topBuyerEthName === undefined
                                ? categoryNormalisedMetadata?.topBuyer
                                : this.categoryNormalisedMetadata
                                    .topBuyerEthName
                            }}
                          </b>
                        </a>
                      </div>
                    </div>
                    <div
                      class="cos-gray-text cos-margin-0 cos-no-margin-bottom cos-center-text cos-body-4"
                    >
                      {{ "LABELS.TOP_BUYER" | translate }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div
            *ngIf="tabDisplay === tabDisplayModes.DOMAINS"
            fxFlex
            fxLayout="row wrap"
            fxLayoutAlign="start start"
          >
            <ng-container *ngIf="displayMode === displayModes.LINEAR">
              <ng-container *ngTemplateOutlet="linearDomainTemplateHeader">
              </ng-container>
            </ng-container>
            <ng-container
              *ngIf="
                hasDomainsListLoaded === false &&
                displayMode === displayModes.LINEAR &&
                lastDomainSearchResult === undefined
              "
            >
              <ng-container *ngTemplateOutlet="placeHolderFullTemplate">
              </ng-container>
            </ng-container>
            <ng-container
              *ngIf="
                hasDomainsListLoaded === false &&
                displayMode === displayModes.AVATAR &&
                lastDomainSearchResult === undefined
              "
            >
              <ng-container *ngTemplateOutlet="placeHolderAvatarTemplate">
              </ng-container>
            </ng-container>
            <div
              *ngIf="
                hasDomainsListLoaded === true &&
                !(filterSearchDomains().length > 0)
              "
              fxFlex
              fxLayout="column"
              fxLayoutAlign="center center"
              class="cos-fluid-width cos-fluid-height cos-bg-gray cos-border-radius-2"
            >
              <div fxFlex="0 0 auto">
                <app-custom-spinner
                  [spinnerText]="'SPINNER.NO_DATA_TO_DISPLAY'"
                  [spinnerSize]="150"
                  [mode]="spinnerModes.LOADING"
                  [customIcon]="'llayers'"
                >
                </app-custom-spinner>
              </div>
            </div>
            <ng-container
              *ngIf="
                hasDomainsListLoaded === true &&
                displayMode === displayModes.LINEAR
              "
            >
              <ng-container *ngTemplateOutlet="linearDomainTemplate">
              </ng-container>
            </ng-container>
            <ng-container
              *ngIf="
                hasDomainsListLoaded === true &&
                displayMode === displayModes.AVATAR
              "
            >
              <ng-container *ngTemplateOutlet="avatarDomainTemplate">
              </ng-container>
            </ng-container>
            <ng-container
              *ngIf="
                hasDomainsListLoaded === true &&
                categoryDomains !== undefined &&
                domainsListResolving === true &&
                displayMode === displayModes.AVATAR &&
                ((lastDomainSearchResult !== undefined &&
                  lastDomainSearchResult.length > 0) ||
                  lastDomainSearchResult === undefined)
              "
            >
              <ng-container *ngTemplateOutlet="placeHolderAvatarTemplate">
              </ng-container>
            </ng-container>
            <ng-container
              *ngIf="
                hasDomainsListLoaded === true &&
                categoryDomains !== undefined &&
                domainsListResolving === true &&
                displayMode === displayModes.LINEAR &&
                ((lastDomainSearchResult !== undefined &&
                  lastDomainSearchResult.length > 0) ||
                  lastDomainSearchResult === undefined)
              "
            >
              <ng-container *ngTemplateOutlet="placeHolderFullTemplate">
              </ng-container>
            </ng-container>
            <ng-container *ngIf="displayMode === displayModes.LINEAR">
              <ng-container *ngTemplateOutlet="linearDomainTemplateFooter">
              </ng-container>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
  <app-footer></app-footer>
</div>

<ng-template #avatarDomainTemplate>
  <ng-container *ngFor="let d of filterSearchDomains()">
    <div
      fxLayout="column"
      class="co-item-with-avatar cos-pointer cos-bg-gray cos-border-radius-2 cos-overflow-hidden"
    >
      <div class="co-bookmark cos-padding-1" fxLayoutAlign="end end">
        <mat-icon
          (click)="toggleBookmark(d)"
          [ngClass]="
            bookmarksService.isDomainBookmarked(bookmarks, d.labelName)
              ? 'checked'
              : ''
          "
          >{{
            bookmarksService.isDomainBookmarked(bookmarks, d.labelName)
              ? "bookmark_added"
              : "bookmark_add"
          }}</mat-icon
        >
      </div>
      <div
        fxLayout="column"
        class="co-avatar-frame cos-fluid-width cos-overflow-hidden"
      >
        <app-preview-image
          [preview]="'assets/img-blank.png'"
          [error]="'assets/profile-blank.svg'"
          [src]="ensMetadataAPI + hashToBigIntString(d.labelHash) + '/image'"
          [style.height]="'auto'"
          class="co-avatar cos-fluid-width cos-pointer"
          (click)="goToDomain(d.labelName)"
          [enableBorderRadius]="false"
        ></app-preview-image>
      </div>
      <div
        fxLayout="column"
        class="co-avatar-item-details"
        fxLayoutAlign="start start"
        [style.margin-top]="-((guideAvatarSize / 100) * 6 - 1) + 'px'"
      >
        <mat-progress-bar
          *ngIf="d.gracePeriodPercent !== undefined && d.gracePeriodPercent > 0"
          class="co-bulk-search-item-expiration-bar co-bar-for-avatar cos-hazard-progress-bar cos-no-border-radius"
          mode="determinate"
          [value]="d.gracePeriodPercent"
        ></mat-progress-bar>
        <div
          fxFlex
          fxLayout="column"
          fxLayoutGap="5px"
          fxLayoutAlign="center start"
          class="cos-padding-1"
        >
          <div
            fxFlex="0 0 auto"
            class="cos-body-0"
            (click)="goToDomain(d.labelName)"
          >
            <b> {{ pretty(d.labelName) }}.eth </b>
          </div>
          <div fxFlex fxLayout="row" class="cos-body-3 cos-gray-text">
            <div fxFlex="0 0 auto">Exp.</div>
            &nbsp;
            <div>{{ d.expiry | timeAgo }}</div>
          </div>
          <div fxFlex></div>
        </div>
        <mat-icon
          *ngIf="domainValid(d.labelName) === false"
          color="accent"
          class="cos-small-icon cos-pointer cos-padding-1"
          >warning</mat-icon
        >
      </div>
      <div
        class="co-buy-now cos-padding-0 cos-bg-main"
        fxLayoutAlign="center center"
        (click)="openPurchasePanel(d)"
      >
        <b> {{ "BUTTON.BUY_NOW" | translate }} </b>
      </div>
    </div>
  </ng-container>
</ng-template>

<ng-template #linearSalesTemplateHeader>
  <div
    class="cos-bg-gray cos-padding-2 cos-fluid-width cos-border-darker cos-no-border-top cos-no-border-left cos-no-border-right cos-border-radius-2 cos-no-border-radius-bottom-left cos-no-border-radius-bottom-right cos-pointer"
  >
    <div fxLayoutGap="15px" fxLayoutAlign="start center">
      <div
        fxFlex="25"
        fxLayoutAlign="start center"
        fxLayoutGap="10px"
        class="cos-gray-text"
      >
        {{ "LABELS.SALES_ACTIVITY" | translate }}
      </div>
    </div>
  </div>
</ng-template>
<ng-template #linearDomainTemplateHeader>
  <div
    class="cos-bg-gray cos-padding-2 cos-fluid-width cos-border-darker cos-no-border-top cos-no-border-left cos-no-border-right cos-border-radius-2 cos-no-border-radius-bottom-left cos-no-border-radius-bottom-right cos-pointer"
  >
    <div fxLayoutGap="15px" fxLayoutAlign="center center">
      <div
        fxFlex="25"
        fxLayoutAlign="start center"
        fxLayoutGap="10px"
        class="cos-gray-text"
      >
        {{ "LABELS.DOMAIN" | translate }}
      </div>
      <div fxFlex fxLayoutAlign="center center" class="cos-disappear-on-mobile">
        <span class="cos-gray-text">
          {{ "LABELS.REGISTRATION_DATE" | translate }}
        </span>
      </div>
      <div fxFlex fxLayoutAlign="center center" class="cos-disappear-on-mobile">
        <span class="cos-gray-text">
          {{ "LABELS.EXPIRATION_DATE" | translate }}
        </span>
      </div>
      <div fxFlex></div>
    </div>
  </div>
</ng-template>
<ng-template #linearDomainTemplateFooter>
  <div
    class="cos-bg-gray cos-padding-2 cos-fluid-width cos-no-border-right cos-border-radius-2 cos-no-border-radius-top-left cos-no-border-radius-top-right cos-pointer"
  ></div>
</ng-template>

<ng-template #linearDomainTemplate>
  <ng-container *ngFor="let d of filterSearchDomains()">
    <div
      class="co-bulk-search-item-container co-linear-item cos-no-margin-right cos-pointer"
      (click)="goToDomain(pretty(d.labelName))"
    >
      <mat-progress-bar
        *ngIf="d.gracePeriodPercent !== undefined && d.gracePeriodPercent > 0"
        class="co-bulk-search-item-expiration-bar cos-hazard-progress-bar"
        mode="determinate"
        [value]="d.gracePeriodPercent"
      ></mat-progress-bar>
      <div
        class="co-bulk-search-item cos-padding-1 cos-overflow-hidden cos-bg-gray"
        [ngClass]="
          d.gracePeriodPercent !== undefined && d.gracePeriodPercent > 0
            ? ''
            : 'co-bulk-search-item-fill-progress-bar-gap'
        "
        fxLayoutGap="15px"
        fxLayoutAlign="center center"
      >
        <div
          fxFlex="25"
          fxLayoutAlign="start center"
          fxLayoutGap="10px"
          class="cos-wallet-address-text-cut"
        >
          <a (click)="goToDomain(d.labelName)">
            <b> {{ pretty(d.labelName) }}.eth </b>
          </a>
          <mat-icon
            *ngIf="domainValid(d.labelName) === false"
            color="accent"
            class="cos-small-icon cos-pointer"
            >warning</mat-icon
          >
        </div>
        <div
          fxFlex
          fxLayoutAlign="center center"
          class="cos-disappear-on-mobile"
        >
          {{ d.registrationDate | timeAgo }}
        </div>
        <div
          fxFlex
          fxLayoutAlign="center center"
          class="cos-disappear-on-mobile"
        >
          {{ d.expiry | timeAgo }}
        </div>
        <a
          fxFlex
          fxLayoutAlign="end center"
          href="{{ getDomainLink(d.labelName + '.eth') }}"
          target="_blank"
          class="cos-body-3"
        >
          {{ "BUTTON.VIEW_DETAILS" | translate }}
        </a>
      </div>
    </div>
  </ng-container>
</ng-template>

<ng-template #linearSalesTemplate>
  <ng-container *ngFor="let s of salesList">
    <div
      class="co-bulk-search-item-container co-linear-item cos-fluid-width cos-no-margin-right cos-pointer"
    >
      <div
        fxFlex
        fxLayout="row"
        fxLayoutAlign="start center"
        class="co-bulk-search-item cos-fluid-width cos-padding-1 cos-border-radius-1 cos-overflow-hidden cos-bg-gray"
      >
        <div
          fxFlex="25"
          fxLayout="row"
          fxLayoutAlign="start center"
          fxLayoutGap="10px"
        >
          <div
            fxFlex="0 0 auto"
            class="cos-bg-main cos-border-radius-1 cos-padding-2 cos-no-padding-top cos-no-padding-bottom cos-body-4 cos-disappear-on-mobile"
          >
            {{ "LABELS.SALE" | translate }}
          </div>
          <div fxFlex>
            <a (click)="goToDomain(s.domain)">
              <b> {{ pretty(s.domain) }}.eth </b>
            </a>
            <mat-icon
              *ngIf="domainValid(s.domain) === false"
              color="accent"
              class="cos-small-icon cos-pointer"
              >warning</mat-icon
            >
          </div>
        </div>
        <div
          fxFlex="40"
          fxLayout="column"
          fxLayoutAlign="start start"
          class="cos-disappear-on-mobile"
        >
          <div class="cos-gray-text">
            {{ "LABELS.BUYER" | translate }}:&nbsp;
          </div>
          <div class="cos-wallet-address-cut cos-fluid-width-half">
            <a
              (click)="goToEtherscanAddress(s.buyer)"
              target="_blank"
              class="cos-body-4"
            >
              {{ s.buyer }}
            </a>
          </div>
        </div>
        <div fxFlex="0 0 auto" fxLayout="column" fxLayoutAlign="start start">
          <div class="cos-gray-text cos-disappear-on-mobile">
            {{ "LABELS.PRICE" | translate }}:&nbsp;
          </div>
          <div class="cos-disappear-on-mobile">
            <b> {{ priceToFixedString(s.price) }} ETH </b>
          </div>
          <div
            class="cos-show-on-mobile cos-padding-2 cos-no-padding-top cos-no-padding-bottom cos-no-padding-right"
          >
            <b> {{ priceToFixedString(s.price) }} ETH </b>
          </div>
        </div>
        <div fxFlex fxLayoutAlign="end center">
          <a
            (click)="goToEtherscanTx(s.tx)"
            target="_blank"
            class="cos-body-3"
            fxLayoutAlign="center center"
            fxLayoutGap="10px"
          >
            <div>
              {{ timeNumberToString(s.timestamp) | timeAgo }}
            </div>
            <mat-icon class="cos-small-icon">open_in_new</mat-icon>
          </a>
        </div>
      </div>
    </div>
  </ng-container>
</ng-template>

<ng-template #placeHolderFullTemplate>
  <ng-container *ngFor="let d of placeholders">
    <div
      class="co-bulk-search-item-container co-linear-item cos-placeholder cos-fluid-width"
    >
      <div
        fxLayoutGap="15px"
        fxLayoutAlign="center center"
        class="co-bulk-search-item cos-padding-2 cos-border-radius-1 cos-overflow-hidden cos-bg-gray"
      ></div>
    </div>
  </ng-container>
</ng-template>

<ng-template #placeHolderAvatarTemplate>
  <ng-container *ngFor="let d of placeholders">
    <div
      class="co-bulk-search-item-container cos-placeholder cos-bulk-sarch-item-for-avatar"
      [style.height]="guideAvatarSize + 125 + 'px'"
    >
      <div
        fxLayoutGap="15px"
        fxLayoutAlign="center center"
        class="co-bulk-search-item cos-no-border cos-padding-2 cos-border-radius-1 cos-overflow-hidden cos-bg-gray"
      ></div>
    </div>
  </ng-container>
</ng-template>
